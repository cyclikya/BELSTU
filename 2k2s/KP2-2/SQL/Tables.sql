CREATE TABLE Faculties (
    faculty_id SERIAL PRIMARY KEY,
    faculty_name VARCHAR NOT NULL,
    description TEXT
);
CREATE TABLE Accounts (
    account_id SERIAL PRIMARY KEY,
    last_name VARCHAR NOT NULL,
    first_name VARCHAR NOT NULL,
    middle_name VARCHAR,
    address TEXT,
    phone_number VARCHAR,
    email VARCHAR UNIQUE
);
CREATE TABLE StudyGroups (
    group_id SERIAL PRIMARY KEY,
    group_name VARCHAR NOT NULL,
    start_year INT NOT NULL,
    faculty_id INT NOT NULL,
    CONSTRAINT fk_groups_faculty FOREIGN KEY (faculty_id) REFERENCES Faculties(faculty_id) ON DELETE CASCADE
);
CREATE TABLE Students (
    student_id SERIAL PRIMARY KEY,
    account_id INT NOT NULL,
    record_book_id VARCHAR UNIQUE NOT NULL,
    group_id INT NOT NULL,
    CONSTRAINT fk_students_account FOREIGN KEY (account_id) REFERENCES Accounts(account_id) ON DELETE CASCADE,
    CONSTRAINT fk_students_group FOREIGN KEY (group_id) REFERENCES StudyGroups(group_id) ON DELETE CASCADE
);
CREATE TABLE Teachers (
    teacher_id SERIAL PRIMARY KEY,
    account_id INT NOT NULL,
    academic_degree VARCHAR,
    academic_rank VARCHAR,
    education_level VARCHAR,
    CONSTRAINT fk_teachers_account FOREIGN KEY (account_id) REFERENCES Accounts(account_id) ON DELETE CASCADE
);
CREATE TABLE Employees (
    employee_id SERIAL PRIMARY KEY,
    account_id INT NOT NULL,
    position VARCHAR NOT NULL,
    employment_date DATE NOT NULL,
    faculty_id INT NOT NULL,
    CONSTRAINT fk_employees_account FOREIGN KEY (account_id) REFERENCES Accounts(account_id) ON DELETE CASCADE,
    CONSTRAINT fk_employees_faculty FOREIGN KEY (faculty_id) REFERENCES Faculties(faculty_id) ON DELETE CASCADE
);
CREATE TABLE Subjects (
    subject_id SERIAL PRIMARY KEY,
    subject_name VARCHAR NOT NULL,
    hours INT NOT NULL,
    form_of_assessment VARCHAR NOT NULL,
    faculty_id INT NOT NULL,
    CONSTRAINT fk_subjects_faculty FOREIGN KEY (faculty_id) REFERENCES Faculties(faculty_id) ON DELETE CASCADE
);
CREATE TABLE Grades (
    grade_id SERIAL PRIMARY KEY,
    student_id INT NOT NULL,
    subject_id INT NOT NULL,
    teacher_id INT NOT NULL,
    grade INT NOT NULL CHECK (grade >= 0 AND grade <= 100),
    date DATE NOT NULL,
    CONSTRAINT fk_grades_student FOREIGN KEY (student_id) REFERENCES Students(student_id) ON DELETE CASCADE,
    CONSTRAINT fk_grades_subject FOREIGN KEY (subject_id) REFERENCES Subjects(subject_id) ON DELETE CASCADE,
    CONSTRAINT fk_grades_teacher FOREIGN KEY (teacher_id) REFERENCES Teachers(teacher_id) ON DELETE CASCADE
);
CREATE TABLE Attendance (
    attendance_id SERIAL PRIMARY KEY,
    student_id INT NOT NULL,
    subject_id INT NOT NULL,
    attendance_date DATE NOT NULL,
    status VARCHAR NOT NULL,
    CONSTRAINT fk_attendance_student FOREIGN KEY (student_id) REFERENCES Students(student_id) ON DELETE CASCADE,
    CONSTRAINT fk_attendance_subject FOREIGN KEY (subject_id) REFERENCES Subjects(subject_id) ON DELETE CASCADE
);
CREATE TABLE Reports (
    report_id SERIAL PRIMARY KEY,
    report_type VARCHAR NOT NULL,
    report_data JSON NOT NULL,
    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
    employee_id INT NOT NULL,
    CONSTRAINT fk_reports_employee FOREIGN KEY (employee_id) REFERENCES Employees(employee_id) ON DELETE CASCADE
);

-- Faculties (10 факультетов)
INSERT INTO Faculties (faculty_id, faculty_name, description) VALUES
(1, 'Механико-математический', 'Факультет механики и математики'),
(2, 'Инженерно-строительный', 'Факультет инженерного строительства'),
(3, 'Биологический', 'Факультет биологии'),
(4, 'Химический', 'Факультет химии'),
(5, 'Исторический', 'Факультет истории'),
(6, 'Филологический', 'Факультет филологии'),
(7, 'Экономический', 'Факультет экономики'),
(8, 'Юридический', 'Факультет права'),
(9, 'Психологический', 'Факультет психологии'),
(10, 'Географический', 'Факультет географии');
-- Accounts (30 аккаунтов: 10 студентов, 10 преподавателей, 10 сотрудников)
INSERT INTO Accounts (account_id, last_name, first_name, middle_name, address, phone_number, email) VALUES
-- Студенты (1-10)
(1, 'Ковалев', 'Андрей', 'Игоревич', 'Минск, ул. Сурганова, 4', '+375291234567', 'kovalev1@stud.by'),
(2, 'Сидоренко', 'Мария', 'Сергеевна', 'Гродно, ул. Советская, 10', '+375333456789', 'sidorenko2@stud.by'),
(3, 'Лапко', 'Екатерина', 'Андреевна', 'Брест, ул. Ленина, 15', '+375251112233', 'lapko3@stud.by'),
(4, 'Гриневич', 'Дмитрий', 'Петрович', 'Гомель, ул. Победы, 7', '+375441234567', 'grinevich4@stud.by'),
(5, 'Мартынова', 'Ольга', 'Викторовна', 'Витебск, ул. Чкалова, 22', '+375291234568', 'martynova5@stud.by'),
(6, 'Шиманович', 'Алексей', 'Валерьевич', 'Могилёв, ул. Первомайская, 8', '+375333456780', 'shimanovich6@stud.by'),
(7, 'Прокопенко', 'Валерия', 'Александровна', 'Барановичи, ул. Кирова, 1', '+375251112234', 'prokopenko7@stud.by'),
(8, 'Дрозд', 'Иван', 'Васильевич', 'Орша, ул. Ленина, 5', '+375441234568', 'drozd8@stud.by'),
(9, 'Климович', 'Татьяна', 'Геннадьевна', 'Полоцк, ул. Октябрьская, 3', '+375291234569', 'klimovich9@stud.by'),
(10, 'Гаврилюк', 'Артём', 'Михайлович', 'Бобруйск, ул. Минская, 12', '+375333456781', 'gavrilyuk10@stud.by'),
-- Преподаватели (11-20)
(11, 'Савчук', 'Виктор', 'Степанович', 'Минск, пр. Независимости, 20', '+375291234570', 'savchuk11@bsu.by'),
(12, 'Романович', 'Инна', 'Павловна', 'Гродно, ул. Дзержинского, 8', '+375333456782', 'romanovich12@bsu.by'),
(13, 'Козел', 'Сергей', 'Владимирович', 'Брест, ул. Московская, 17', '+375251112235', 'kozel13@bsu.by'),
(14, 'Демидович', 'Анастасия', 'Игоревна', 'Гомель, ул. Советская, 14', '+375441234569', 'demidovich14@bsu.by'),
(15, 'Быкова', 'Елена', 'Анатольевна', 'Витебск, ул. Ленина, 30', '+375291234571', 'bykova15@bsu.by'),
(16, 'Шевцов', 'Павел', 'Сергеевич', 'Могилёв, ул. Челюскинцев, 2', '+375333456783', 'shevtsov16@bsu.by'),
(17, 'Курлович', 'Ольга', 'Викторовна', 'Барановичи, ул. Парковая, 6', '+375251112236', 'kurlovich17@bsu.by'),
(18, 'Гринь', 'Андрей', 'Александрович', 'Орша, ул. Гагарина, 11', '+375441234570', 'grin18@bsu.by'),
(19, 'Кравченко', 'Тимур', 'Викторович', 'Полоцк, ул. Комсомольская, 9', '+375291234572', 'kravchenko19@bsu.by'),
(20, 'Бондарь', 'Анна', 'Валерьевна', 'Бобруйск, ул. Советская, 2', '+375333456784', 'bondar20@bsu.by'),
-- Сотрудники (21-30)
(21, 'Синицкая', 'Марина', 'Игоревна', 'Минск, ул. Толстого, 18', '+375291234573', 'sinitskaya21@bsu.by'),
(22, 'Данилов', 'Олег', 'Петрович', 'Гродно, ул. Калинина, 12', '+375333456785', 'danilov22@bsu.by'),
(23, 'Петрук', 'Владимир', 'Андреевич', 'Брест, ул. Карла Маркса, 3', '+375251112237', 'petruk23@bsu.by'),
(24, 'Гуринович', 'Екатерина', 'Владимировна', 'Гомель, ул. Жукова, 19', '+375441234571', 'gurinovich24@bsu.by'),
(25, 'Воронко', 'Ирина', 'Сергеевна', 'Витебск, ул. Фрунзе, 6', '+375291234574', 'voronko25@bsu.by'),
(26, 'Климов', 'Денис', 'Валерьевич', 'Могилёв, ул. Якубовского, 13', '+375333456786', 'klimov26@bsu.by'),
(27, 'Короткевич', 'Анна', 'Александровна', 'Барановичи, ул. Советская, 4', '+375251112238', 'korotkevich27@bsu.by'),
(28, 'Гриб', 'Сергей', 'Петрович', 'Орша, ул. Пролетарская, 7', '+375441234572', 'grib28@bsu.by'),
(29, 'Семенюк', 'Евгений', 'Андреевич', 'Полоцк, ул. Мира, 14', '+375291234575', 'semenyuk29@bsu.by'),
(30, 'Мельник', 'Татьяна', 'Валерьевна', 'Бобруйск, ул. Дзержинского, 8', '+375333456787', 'melnik30@bsu.by');

(26, 'Климов', 'Денис', 'Валерьевич', 'Могилёв, ул. Якубовского, 13', '+375333456786', 'klimov26@bsu.by'),
(27, 'Короткевич', 'Анна', 'Александровна', 'Барановичи, ул. Советская, 4', '+375251112238', 'korotkevich27@bsu.by'),
(28, 'Гриб', 'Сергей', 'Петрович', 'Орша, ул. Пролетарская, 7', '+375441234572', 'grib28@bsu.by'),
(29, 'Семенюк', 'Евгений', 'Андреевич', 'Полоцк, ул. Мира, 14', '+375291234575', 'semenyuk29@bsu.by'),
(30, 'Мельник', 'Татьяна', 'Валерьевна', 'Бобруйск, ул. Дзержинского, 8', '+375333456787', 'melnik30@bsu.by');
-- StudyGroups (10 групп)
INSERT INTO StudyGroups (group_id, group_name, start_year, faculty_id) VALUES
(1, 'ММФ-23', 2023, 1),
(2, 'ИСФ-22', 2022, 2),
(3, 'БИО-21', 2021, 3),
(4, 'ХИМ-23', 2023, 4),
(5, 'ИСТ-22', 2022, 5),
(6, 'ФИЛ-21', 2021, 6),
(7, 'ЭКО-23', 2023, 7),
(8, 'ЮР-22', 2022, 8),
(9, 'ПСИХ-21', 2021, 9),
(10, 'ГЕО-23', 2023, 10);
-- Students (10 студентов, аккаунты 1-10)
INSERT INTO Students (student_id, account_id, record_book_id, group_id) VALUES
(1, 1, 'RB001', 1),
(2, 2, 'RB002', 2),
(3, 3, 'RB003', 3),
(4, 4, 'RB004', 4),
(5, 5, 'RB005', 5),
(6, 6, 'RB006', 6),
(7, 7, 'RB007', 7),
(8, 8, 'RB008', 8),
(9, 9, 'RB009', 9),
(10, 10, 'RB010', 10);
-- Teachers (10 преподавателей, аккаунты 11-20)
INSERT INTO Teachers (teacher_id, account_id, academic_degree, academic_rank, education_level) VALUES
(1, 11, 'кандидат наук', 'доцент', 'высшее'),
(2, 12, 'доктор наук', 'профессор', 'высшее'),
(3, 13, NULL, 'ассистент', 'высшее'),
(4, 14, 'кандидат наук', NULL, 'высшее'),
(5, 15, NULL, NULL, 'высшее'),
(6, 16, 'доктор наук', 'профессор', 'высшее'),
(7, 17, 'кандидат наук', 'доцент', 'высшее'),
(8, 18, NULL, 'ассистент', 'высшее'),
(9, 19, NULL, NULL, 'высшее'),
(10, 20, 'кандидат наук', 'доцент', 'высшее');
-- Employees (10 сотрудников, аккаунты 21-30)
INSERT INTO Employees (employee_id, account_id, position, employment_date, faculty_id) VALUES
(1, 21, 'секретарь', '2022-09-01', 1),
(2, 22, 'бухгалтер', '2022-09-02', 2),
(3, 23, 'лаборант', '2022-09-03', 3),
(4, 24, 'администратор', '2022-09-04', 4),
(5, 25, 'менеджер', '2022-09-05', 5),
(6, 26, 'секретарь', '2022-09-06', 6),
(7, 27, 'бухгалтер', '2022-09-07', 7),
(8, 28, 'лаборант', '2022-09-08', 8),
(9, 29, 'администратор', '2022-09-09', 9),
(10, 30, 'менеджер', '2022-09-10', 10);
-- Subjects (10 предметов)
INSERT INTO Subjects (subject_id, subject_name, hours, form_of_assessment, faculty_id) VALUES
(1, 'Высшая математика', 120, 'экзамен', 1),
(2, 'Строительное материаловедение', 100, 'зачет', 2),
(3, 'Генетика', 110, 'экзамен', 3),
(4, 'Физическая химия', 90, 'зачет', 4),
(5, 'История Беларуси', 80, 'экзамен', 5),
(6, 'Белорусская литература', 70, 'зачет', 6),
(7, 'Микроэкономика', 60, 'экзамен', 7),
(8, 'Гражданское право', 50, 'зачет', 8),
(9, 'Психология общения', 40, 'экзамен', 9),
(10, 'География Беларуси', 30, 'зачет', 10);
-- Grades: 6 оценок на каждого студента
INSERT INTO Grades (grade_id, student_id, subject_id, teacher_id, grade, date) VALUES
-- Студент 1
(1, 1, 1, 1, 9, '2024-03-10'),
(2, 1, 2, 2, 8, '2024-03-17'),
(3, 1, 3, 3, 7, '2024-03-24'),
(4, 1, 4, 4, 10, '2024-03-31'),
(5, 1, 5, 5, 9, '2024-04-07'),
(6, 1, 6, 6, 8, '2024-04-14'),
-- Студент 2
(7, 2, 2, 2, 4, '2024-03-11'),
(8, 2, 3, 3, 3, '2024-03-18'),
(9, 2, 4, 4, 2, '2024-03-25'),
(10, 2, 5, 5, 3, '2024-04-01'),
(11, 2, 6, 6, 1, '2024-04-08'),
(12, 2, 7, 7, 3, '2024-04-15'),
-- Студент 3
(13, 3, 3, 3, 7, '2024-03-12'),
(14, 3, 4, 4, 8, '2024-03-19'),
(15, 3, 5, 5, 9, '2024-03-26'),
(16, 3, 6, 6, 7, '2024-04-02'),
(17, 3, 7, 7, 6, '2024-04-09'),
(18, 3, 8, 8, 8, '2024-04-16'),
-- Студент 4
(19, 4, 4, 4, 9, '2024-03-13'),
(20, 4, 5, 5, 8, '2024-03-20'),
(21, 4, 6, 6, 7, '2024-03-27'),
(22, 4, 7, 7, 10, '2024-04-03'),
(23, 4, 8, 8, 9, '2024-04-10'),
(24, 4, 9, 9, 8, '2024-04-17'),
-- Студент 5
(25, 5, 5, 5, 8, '2024-03-14'),
(26, 5, 6, 6, 9, '2024-03-21'),
(27, 5, 7, 7, 7, '2024-03-28'),
(28, 5, 8, 8, 6, '2024-04-04'),
(29, 5, 9, 9, 10, '2024-04-11'),
(30, 5, 10, 10, 8, '2024-04-18'),
-- Студент 6
(31, 6, 6, 6, 7, '2024-03-15'),
(32, 6, 7, 7, 8, '2024-03-22'),
(33, 6, 8, 8, 6, '2024-03-29'),
(34, 6, 9, 9, 9, '2024-04-05'),
(35, 6, 10, 10, 10, '2024-04-12'),
(36, 6, 1, 1, 8, '2024-04-19'),
-- Студент 7
(37, 7, 7, 7, 8, '2024-03-16'),
(38, 7, 8, 8, 7, '2024-03-23'),
(39, 7, 9, 9, 9, '2024-03-30'),
(40, 7, 10, 10, 8, '2024-04-06'),
(41, 7, 1, 1, 7, '2024-04-13'),
(42, 7, 2, 2, 6, '2024-04-20'),
-- Студент 8
(43, 8, 8, 8, 9, '2024-03-17'),
(44, 8, 9, 9, 8, '2024-03-24'),
(45, 8, 10, 10, 10, '2024-03-31'),
(46, 8, 1, 1, 7, '2024-04-07'),
(47, 8, 2, 2, 8, '2024-04-14'),
(48, 8, 3, 3, 9, '2024-04-21'),
-- Студент 9
(49, 9, 9, 9, 8, '2024-03-18'),
(50, 9, 10, 10, 7, '2024-03-25'),
(51, 9, 1, 1, 9, '2024-04-01'),
(52, 9, 2, 2, 8, '2024-04-08'),
(53, 9, 3, 3, 7, '2024-04-15'),
(54, 9, 4, 4, 6, '2024-04-22'),
-- Студент 10
(55, 10, 10, 10, 10, '2024-03-19'),
(56, 10, 1, 1, 9, '2024-03-26'),
(57, 10, 2, 2, 8, '2024-04-02'),
(58, 10, 3, 3, 7, '2024-04-09'),
(59, 10, 4, 4, 8, '2024-04-16'),
(60, 10, 5, 5, 9, '2024-04-23');
-- Attendance: 6 записей на каждого студента
INSERT INTO Attendance (attendance_id, student_id, subject_id, attendance_date, status) VALUES
-- Студент 1
(1, 1, 1, '2024-03-01', 'присутствовал'),
(2, 1, 2, '2024-03-08', 'присутствовал'),
(3, 1, 3, '2024-03-15', 'отсутствовал'),
(4, 1, 4, '2024-03-22', 'присутствовал'),
(5, 1, 5, '2024-03-29', 'опоздал'),
(6, 1, 6, '2024-04-05', 'присутствовал'),
-- Студент 2
(7, 2, 2, '2024-03-02', 'присутствовал'),
(8, 2, 3, '2024-03-09', 'отсутствовал'),
(9, 2, 4, '2024-03-16', 'присутствовал'),
(10, 2, 5, '2024-03-23', 'присутствовал'),
(11, 2, 6, '2024-03-30', 'опоздал'),
(12, 2, 7, '2024-04-06', 'присутствовал'),
-- Студент 3
(13, 3, 3, '2024-03-03', 'присутствовал'),
(14, 3, 4, '2024-03-10', 'присутствовал'),
(15, 3, 5, '2024-03-17', 'отсутствовал'),
(16, 3, 6, '2024-03-24', 'присутствовал'),
(17, 3, 7, '2024-03-31', 'опоздал'),
(18, 3, 8, '2024-04-07', 'присутствовал'),
-- Студент 4
(19, 4, 4, '2024-03-04', 'присутствовал'),
(20, 4, 5, '2024-03-11', 'присутствовал'),
(21, 4, 6, '2024-03-18', 'отсутствовал'),
(22, 4, 7, '2024-03-25', 'присутствовал'),
(23, 4, 8, '2024-04-01', 'опоздал'),
(24, 4, 9, '2024-04-08', 'присутствовал'),
-- Студент 5
(25, 5, 5, '2024-03-05', 'присутствовал'),
(26, 5, 6, '2024-03-12', 'присутствовал'),
(27, 5, 7, '2024-03-19', 'отсутствовал'),
(28, 5, 8, '2024-03-26', 'присутствовал'),
(29, 5, 9, '2024-04-02', 'опоздал'),
(30, 5, 10, '2024-04-09', 'присутствовал'),
-- Студент 6
(31, 6, 6, '2024-03-06', 'присутствовал'),
(32, 6, 7, '2024-03-13', 'присутствовал'),
(33, 6, 8, '2024-03-20', 'отсутствовал'),
(34, 6, 9, '2024-03-27', 'присутствовал'),
(35, 6, 10, '2024-04-03', 'опоздал'),
(36, 6, 1, '2024-04-10', 'присутствовал'),
-- Студент 7
(37, 7, 7, '2024-03-07', 'присутствовал'),
(38, 7, 8, '2024-03-14', 'присутствовал'),
(39, 7, 9, '2024-03-21', 'отсутствовал'),
(40, 7, 10, '2024-03-28', 'присутствовал'),
(41, 7, 1, '2024-04-04', 'опоздал'),
(42, 7, 2, '2024-04-11', 'присутствовал'),
-- Студент 8
(43, 8, 8, '2024-03-08', 'присутствовал'),
(44, 8, 9, '2024-03-15', 'присутствовал'),
(45, 8, 10, '2024-03-22', 'отсутствовал'),
(46, 8, 1, '2024-03-29', 'присутствовал'),
(47, 8, 2, '2024-04-05', 'опоздал'),
(48, 8, 3, '2024-04-12', 'присутствовал'),
-- Студент 9
(49, 9, 9, '2024-03-09', 'присутствовал'),
(50, 9, 10, '2024-03-16', 'присутствовал'),
(51, 9, 1, '2024-03-23', 'отсутствовал'),
(52, 9, 2, '2024-03-30', 'присутствовал'),
(53, 9, 3, '2024-04-06', 'опоздал'),
(54, 9, 4, '2024-04-13', 'присутствовал'),
-- Студент 10
(55, 10, 10, '2024-03-10', 'присутствовал'),
(56, 10, 1, '2024-03-17', 'присутствовал'),
(57, 10, 2, '2024-03-24', 'отсутствовал'),
(58, 10, 3, '2024-03-31', 'присутствовал'),
(59, 10, 4, '2024-04-07', 'опоздал'),
(60, 10, 5, '2024-04-14', 'присутствовал');
-- Студент 1 доп
(61, 1, 1, 1, 9, '2024-09-10'),
(62, 1, 2, 2, 6, '2024-09-17'),
(63, 1, 3, 3, 7, '2024-09-24'),
(64, 1, 4, 4, 10, '2024-09-30'),
(65, 1, 5, 5, 7, '2024-10-07'),
(66, 1, 6, 6, 8, '2024-10-14');
-- Reports (10 отчетов)
INSERT INTO Reports (report_id, report_type, report_data, employee_id) VALUES
(1, 'Успеваемость', '{"average_grade": 95}', 1),
(2, 'Посещаемость', '{"attendance": "high"}', 2),
(3, 'Успеваемость', '{"average_grade": 88}', 3),
(4, 'Посещаемость', '{"attendance": "medium"}', 4),
(5, 'Успеваемость', '{"average_grade": 77}', 5),
(6, 'Посещаемость', '{"attendance": "low"}', 6),
(7, 'Успеваемость', '{"average_grade": 90}', 7),
(8, 'Посещаемость', '{"attendance": "high"}', 8),
(9, 'Успеваемость', '{"average_grade": 85}', 9),
(10, 'Посещаемость', '{"attendance": "medium"}', 10);

DROP TABLE Faculties;
DROP TABLE Accounts;
DROP TABLE StudyGroups;
DROP TABLE Students;
DROP TABLE Teachers;
DROP TABLE Employees;
DROP TABLE Subjects;
DROP TABLE Grades;
DROP TABLE Attendance;
DROP TABLE Reports;

TRUNCATE TABLE Grades CASCADE;

-- select * from Faculties;
-- select * from Accounts;
-- select * from StudyGroups;
-- select * from Students;
-- select * from Teachers;
-- select * from Employees;
-- select * from Subjects;
-- select * from Grades;
-- select * from Attendance;
-- select * from Reports;
